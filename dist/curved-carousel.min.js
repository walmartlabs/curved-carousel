!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.CurvedCarousel=e(require("react")):t.CurvedCarousel=e(t.React)}(this,function(t){return function(t){function e(r){if(i[r])return i[r].exports;var o=i[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";t.exports={CurvedCarousel:i(1)}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},c=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,s=i;r=!1,null===o&&(o=Function.prototype);var c=Object.getOwnPropertyDescriptor(o,n);if(void 0!==c){if("value"in c)return c.value;var a=c.get;if(void 0===a)return;return a.call(s)}var p=Object.getPrototypeOf(o);if(null===p)return;t=p,e=n,i=s,r=!0,c=p=void 0}},p=i(2),h=r(p),u=function(t){function e(t){o(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={dragging:!1,left:this.props.children.length*-1*(this.props.childWidth+this.props.spacing),top:0,velocity:0,accel:0,containerWidth:0},this.touchObject={},this.clickSafe=!0,this._getMouseEvents=this._getMouseEvents.bind(this),this._rafCb=this._rafCb.bind(this),this._setPosition=this._setPosition.bind(this)}return n(e,t),c(e,[{key:"componentDidMount",value:function(){this._startRaf(),this._setPosition(),window.addEventListener("load",this._setPosition),window.addEventListener("resize",this._setPosition)}},{key:"render",value:function(){return h.default.createElement("div",s({className:"infinite-scroll"},this._getMouseEvents(),{ref:"container"},this.props),h.default.createElement("div",{style:{position:"relative",height:"100%",width:"100%",overflow:"hidden"}},this._childrenWithPositions()))}},{key:"_setPosition",value:function(){this.setState({containerWidth:h.default.findDOMNode(this.refs.container).offsetWidth})}},{key:"_onSelect",value:function(t){Math.abs(this.state.velocity)<.5&&this.props.onSelect&&this.props.onSelect.call(null,this.currentChildren[t].props.originalIndex)}},{key:"_childrenWithPositions",value:function(){var t=this,e=Array.prototype.slice.call(this.props.children,0),i=[];return Array.prototype.slice.call(this.props.children,0,this.props.children.length).reverse().forEach(function(t,i){e.unshift(h.default.addons.cloneWithProps(t,{key:"clone"+(e.length-i)}))}),Array.prototype.slice.call(this.props.children,0,this.props.children.length).forEach(function(t,i){e.push(h.default.addons.cloneWithProps(t,{key:"clone"+i}))}),e.forEach(function(e,r){var o=t.state.left+r*(t.props.childWidth+t.props.spacing),n=(360/t.state.containerWidth*(t.state.containerWidth/2),t.state.containerWidth,o*Math.cos(1)),s=n/Math.PI*(t.props.curve/100),c=Math.abs(n)*(t.props.curve/100)/Math.SQRT1_2,a=o/(t.props.childWidth+t.props.spacing);c=c*Math.abs(a)*(Math.LN10/10),t.props.rotation===!1&&(s=0);var p={position:"absolute",left:o+t.state.containerWidth/2-t.props.childWidth/2,transform:"rotate("+s+"deg)",transformOrigin:"bottom center",top:c,width:t.props.childWidth};i.push(h.default.addons.cloneWithProps(e,{style:p,key:r,onClick:t._onSelect.bind(t,r)}))}),this.currentChildren=i,i}},{key:"_getMouseEvents",value:function(){var t=this;return this.props.dragging===!1?null:{onMouseDown:function(e){t.touchObject={startX:e.pageX,startY:e.pageY,prevX:e.pageX,prevY:e.pageY,endX:e.pageX,endY:e.pageY,previousTime:new Date,currentTime:new Date},t.setState({dragging:!0,velocity:0})},onMouseMove:function(e){if(t.state.dragging&&t.touchObject){var i=t._swipeDirection(t.touchObject.startX,e.clientX,t.touchObject.startY,e.clientY);0!==i&&e.preventDefault();var r=t.props.vertical?Math.round(Math.sqrt(Math.pow(e.clientY-t.touchObject.startY,2))):Math.round(Math.sqrt(Math.pow(e.clientX-t.touchObject.startX,2)));t.touchObject={startX:t.touchObject.startX,startY:t.touchObject.startY,previousTime:t.touchObject.currentTime,currentTime:new Date,prevX:t.touchObject.endX,prevY:t.touchObject.endY,endX:e.pageX,endY:e.pageY,length:r,direction:i};var o=t.state.left+(e.clientX-t.touchObject.prevX);o<t.props.children.length*-2*(t.props.childWidth+t.props.spacing)&&(o=t.props.children.length*-1*(t.props.childWidth+t.props.spacing)),o>t.props.children.length*-1*(t.props.childWidth+t.props.spacing)&&(o=t.props.children.length*-2*(t.props.childWidth+t.props.spacing)),t.setState({left:o})}},onMouseUp:function(e){if(t.state.dragging&&t.touchObject){var i=t.touchObject.prevX-t.touchObject.endX!==0?(t.touchObject.prevX-t.touchObject.endX)/(t.touchObject.currentTime-t.touchObject.previousTime)*12:0;t.setState({dragging:!1,velocity:i},function(){t._handleSwipe(e)})}},onMouseLeave:function(e){if(t.state.dragging&&t.touchObject){var i=t.touchObject.prevX-t.touchObject.endX!==0?(t.touchObject.prevX-t.touchObject.endX)/(t.touchObject.currentTime-t.touchObject.previousTime)*17:0;t.setState({dragging:!1,velocity:i},function(){t._handleSwipe(e)})}}}}},{key:"_handleClick",value:function(t){this.clickSafe===!0&&(t.preventDefault(),t.stopPropagation(),t.nativeEvent.stopPropagation())}},{key:"_handleSwipe",value:function(){this.touchObject=null,this._startRaf()}},{key:"_swipeDirection",value:function(t,e,i,r){var o,n,s,c;return o=t-e,n=i-r,s=Math.atan2(n,o),c=Math.round(180*s/Math.PI),c<0&&(c=360-Math.abs(c)),c<=45&&c>=0?1:c<=360&&c>=315?1:c>=135&&c<=225?-1:this.props.vertical===!0?c>=35&&c<=135?1:-1:0}},{key:"_rafCb",value:function(){if(!this.state.dragging){var t=this.state.velocity.toFixed(2)*this.props.friction;if(!(Math.abs(t)<.1)){var e=this.state.left-t;e<this.props.children.length*-2*(this.props.childWidth+this.props.spacing)&&(e=this.props.children.length*-1*(this.props.childWidth+this.props.spacing)),e>this.props.children.length*-1*(this.props.childWidth+this.props.spacing)&&(e=this.props.children.length*-2*(this.props.childWidth+this.props.spacing)),this.setState({velocity:t,left:e}),requestAnimationFrame(this._rafCb)}}}},{key:"_startRaf",value:function(){requestAnimationFrame(this._rafCb)}}]),e}(h.default.Component);u.displayName="CurvedCarousel",u.propTypes={childWidth:h.default.PropTypes.number,curve:h.default.PropTypes.number,spacing:h.default.PropTypes.number,rotation:h.default.PropTypes.bool,friction:h.default.PropTypes.number},u.defaultProps={childWidth:180,curve:50,spacing:40,rotation:!0,friction:.95},t.exports=u},function(e,i){e.exports=t}])});
//# sourceMappingURL=curved-carousel.min.js.map